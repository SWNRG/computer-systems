±stud@vm2:~$ # Στο μάθημα θα εξετάσουμε τα δικαιώματα αρχείων και καταλόγων 
±stud@vm2:~$ # στο Linux. Το σύστημα δικαιωμάτων ελέγχει ποιος έχει πρόσβαση 
±stud@vm2:~$ # σε κάθε αρχείο ή κατάλογο και ποιες ενέργειες επιτρέπονται. 
±stud@vm2:~$ # Για να διαχειριστούμε τα δικαιώματα αυτά, χρησιμοποιούμε την 
±stud@vm2:~$ # εντολή chmod.
±stud@vm2:~$ # 
±stud@vm2:~$ # Κάθε αρχείο ή κατάλογος στο Linux έχει τρία βασικά δικαιώματα:
±stud@vm2:~$ # 
±stud@vm2:~$ # - Ανάγνωση (Read - r): Επιτρέπει την ανάγνωση του περιεχομένου 
±stud@vm2:~$ # του αρχείου ή του καταλόγου. Για παράδειγμα, μπορούμε να 
±stud@vm2:~$ # εμφανίσουμε το περιεχόμενο του αρχείου με την εντολή cat 
±stud@vm2:~$ # ή να εμφανίσουμε τα ονόματα των αρχείων που περιέχει ο κατάλογος 
±stud@vm2:~$ # με την εντολή ls.
±stud@vm2:~$ # 
±stud@vm2:~$ # - Εγγραφή (Write - w): Επιτρέπει την επεξεργασία ή την εγγραφή 
±stud@vm2:~$ # στο αρχείο ή τον κατάλογο. Δηλαδή, επιτρέπεται να μεταβάλουμε 
±stud@vm2:~$ # το περιεχόμενο ενός αρχείου (π.χ. μέσω του επεξεργαστή κειμένου 
±stud@vm2:~$ # `nano`) ή να προσθέσουμε νέα αρχεία σε έναν κατάλογο.
±stud@vm2:~$ # 
±stud@vm2:~$ # - Εκτέλεση (Execute - x): Επιτρέπει την εκτέλεση του αρχείου 
±stud@vm2:~$ # ή την πρόσβαση στον κατάλογο. Για παράδειγμα, μπορούμε να 
±stud@vm2:~$ # εκτελέσουμε ένα πρόγραμμα ή να μπούμε σε έναν κατάλογο 
±stud@vm2:~$ # με την εντολή ls.
±stud@vm2:~$ # 
±stud@vm2:~$ # Τα δικαιώματα αυτά ορίζονται για τρια διαφορετικά επίπεδα 
±stud@vm2:~$ # πρόσβασης:
±stud@vm2:~$ # 
±stud@vm2:~$ # - Κάτοχος (Owner): Ο χρήστης που δημιούργησε το αρχείο 
±stud@vm2:~$ # ή τον κατάλογο.
±stud@vm2:~$ # - Ομάδα (Group): Η ομάδα στην οποία ανήκει το αρχείο 
±stud@vm2:~$ # ή ο κατάλογος.
±stud@vm2:~$ # - Άλλοι (Others): Όλοι οι υπόλοιποι χρήστες στο σύστημα.
±stud@vm2:~$ # 
±stud@vm2:~$ # Για να εμφανίσουμε τα δικαιώματα των αρχείων, χρησιμοποιούμε 
±stud@vm2:~$ # την εντολή ls με την παράμετρο -l:
±stud@vm2:~$ ls -l info
§-rw-rw-r-- 1 stud stud 23 Nov  2  2022 info
±stud@vm2:~$ # 
±stud@vm2:~$ # Δηλαδή, ο ιδιοκτήτης του αρχείου (stud) έχει δικαίωμα ανάγνωσης 
±stud@vm2:~$ # και εγγραφής στο αρχείο info, η ομάδα που ανήκει 
±stud@vm2:~$ # το αρχείο (stud) έχει τα ίδια δικαιώματα, ενώ οι υπόλοιποι 
±stud@vm2:~$ # χρήστες μπορούν μόνο να διαβάσουν το αρχείο.
±stud@vm2:~$ # 
§Ας δούμε τώρα ένα παράδειγμα δικαιωμάτων πρόσβασης σε κατάλογο.
±stud@vm2:~$ ls -l | grep secdir
§drwxr-x--- 2 stud stud  4096 Oct 27  2022 secdir
±stud@vm2:~$ # 
±stud@vm2:~$ # Δηλαδή, ο χρήστης stud έχει δικαίωμα να μπει στον κατάλογο 
±stud@vm2:~$ # (δικαίωμα x), να δεί τα αρχεία που περιέχει (δικαίωμα r), 
±stud@vm2:~$ # αλλά και να αφαιρέσει ή να προσθέσει νέα αρχεία ή 
±stud@vm2:~$ # υποκαταλόγους στον κατάλογο secdir (δικαίωμα w). Αντίστοιχα, 
±stud@vm2:~$ # τα μέλη της ομάδας stud μπορούν μόνο να μπουν και να δουν τα 
±stud@vm2:~$ # αρχεία του καταλόγου. Οι υπόλοιποι χρήστες του συστήματος 
±stud@vm2:~$ # δεν έχουν κανένα ενεργοποιημένο δικαίωμα πρόσβασης στον κατάλογο.
±stud@vm2:~$ # 
±stud@vm2:~$ # Η εντολή chmod ορίζει τα δικαιώματα πρόσβασης σε ένα αρχείο 
±stud@vm2:~$ # ή κατάλογο. Ένας χρήστης μπορεί να μεταβάλλει τα δικαιώματα 
±stud@vm2:~$ # μόνο των αρχείων που είναι ιδιοκτήτης, π.χ. τα αρχεία στον 
±stud@vm2:~$ # προσωπικό του κατάλογο.
±stud@vm2:~$ # 
±stud@vm2:~$ # Η chmod μπορεί να χρησιμοποιηθεί με δύο διαφορετικούς τρόπους: 
±stud@vm2:~$ # το σύστημα ugo (user, group, others) και τον αριθμητικό τρόπο.
±stud@vm2:~$ # 
±stud@vm2:~$ # Στο σύστημα ugo χρησιμοποιούμε τρία γράμματα (u, g, o) 
±stud@vm2:~$ # για κάθε κατηγορία (user, group, others), τον χαρακτήρα + 
±stud@vm2:~$ # στην περίπτωση ενεργοποίησης των δικαιωμάτων ή τον 
±stud@vm2:~$ # χαρακτήρα - στην περίπτωση απενεργοποίησης και στη συνέχεια 
±stud@vm2:~$ # προσθέτουμε τα δικαιώματα που θέλουμε να ενεργοποιήσουμε 
±stud@vm2:~$ # ή να απενεργοποιήσουμε (r, w, x).
±stud@vm2:~$ # 
±stud@vm2:~$ # Έτσι, για παράδειγμα, η εντολή chmod u+r file προσθέτει 
±stud@vm2:~$ # το δικαίωμα ανάγνωσης στον κάτοχο του αρχείου file:
±stud@vm2:~$ ls -l file
§---------- 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ chmod u+r file
±stud@vm2:~$ ls -l file
§-r-------- 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ # 
±stud@vm2:~$ # Εαν αντί για u, g ή o χρησιμοποιήσουμε τον χαρακτήρα a (all), 
±stud@vm2:~$ # τα δικαιώματα εφαρμόζονται για όλους του χρήστες. Το ίδιο 
±stud@vm2:~$ # αποτέλεσμα θα έχουμε εαν παραβλέψουμε εντελώς την δήλωση 
±stud@vm2:~$ # του επιπέδου πρόσβασης. Για παράδειγμα:
±stud@vm2:~$ chmod a+x file
±stud@vm2:~$ ls -l file
§-r-x--x--x 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ chmod -x file
±stud@vm2:~$ ls -l file
§-r-------- 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ # 
±stud@vm2:~$ # Στον αριθμητικό τρόπο χρησιμοποιούμε έναν τριψήφιο αριθμητικό 
±stud@vm2:~$ # κωδικό για να αντιστοιχίσουμε συγκεκριμένα δικαιώματα. 
±stud@vm2:~$ # Κάθε ψηφίο στον κωδικό αντιπροσωπεύει μια κατηγορία 
±stud@vm2:~$ # (user, group, others).
±stud@vm2:~$ # 
±stud@vm2:~$ # Το πρώτο ψηφίο αντιστοιχεί στον κάτοχο (user), το δεύτερο 
±stud@vm2:~$ # στην ομάδα (group), και το τρίτο στους άλλους (others). 
±stud@vm2:~$ # Τα δικαιώματα αναγνώσης, εγγραφής και εκτέλεσης αντιστοιχούν 
±stud@vm2:~$ # στις τιμές 4, 2 και 1, αντίστοιχα.
±stud@vm2:~$ # 
±stud@vm2:~$ # Έτσι, για παράδειγμα, η εντολή chmod 764 file θα έδινε τα εξής 
±stud@vm2:~$ # δικαιώματα:
±stud@vm2:~$ # 
±stud@vm2:~$ # - Κάτοχος: read+write+execute (4+2+1 = 7).
±stud@vm2:~$ # - Ομάδα: read+write (4+2 = 6).
±stud@vm2:~$ # - Άλλοι: read (4).
±stud@vm2:~$ # 
±stud@vm2:~$ # Ας δούμε μερικά παραδείγματα.
±stud@vm2:~$ # 
±stud@vm2:~$ chmod 764 file
±stud@vm2:~$ ls -l file
§-rwxrw-r-- 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ chmod 000 file
±stud@vm2:~$ ls -l file
§---------- 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ chmod 740 file
§-rwxr----- 1 stud stud 0 Dec 13 17:07 file
±stud@vm2:~$ # 
±stud@vm2:~$ # Παρατηρούμε ότι στο σύστημα ugo μπορούμε να ανοίξουμε 
±stud@vm2:~$ # ή να κλείσουμε επιλεκτικά κάποιο δικαίωμα, ενώ στον 
±stud@vm2:~$ # αριθμητικό τρόπο ορίζουμε όλα τα δικαιώματα μαζί.
